<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity6">
<head th:replace="~{fragmentos/cabecero :: cabecero-seccion(titulo='Musica')}"></head>
<body>
<div th:replace="~{fragmentos/navegacion::navegacion-seccion}"></div>
<div class="container mt-4">
    <h3>Musica</h3>
    <div class="mb-3">
        <div class="d-flex justify-content-between align-items-center mb-2">
            <div></div>
            <div sec:authorize="hasRole('ROLE_ADMIN')">
                <a class="btn btn-sm btn-primary" href="/admin/musica/add">Agregar Musica</a>
            </div>
        </div>
        <div th:if="${musicas==null or #lists.isEmpty(musicas)}">
            <p>No hay álbumes (musica) agregados todavía.</p>
        </div>
        <div th:if="${musicas!=null and !#lists.isEmpty(musicas)}">
            <table class="table table-striped">
                <thead><tr><th>ID</th><th>Título</th><th>Año</th><th>Acciones</th></tr></thead>
                <tbody>
                    <tr th:each="m : ${musicas}">
                        <td th:text="${m.id}"></td>
                        <td><a th:href="@{/musica/{id}(id=${m.id})}" th:text="${m.titulo}"></a></td>
                        <td th:text="${m.ano}"></td>
                        <td>
                            <div class="d-inline" sec:authorize="hasRole('ROLE_ADMIN')">
                                <a class="btn btn-sm btn-outline-secondary me-1" th:href="@{/admin/musica/edit/{id}(id=${m.id})}" title="Editar">Editar</a>
                                <form th:action="@{/admin/musica/delete/{id}(id=${m.id})}" method="post" style="display:inline;" onsubmit="return confirm('¿Eliminar este álbum?');">
                                    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                                    <button type="submit" class="btn btn-sm btn-outline-danger">Eliminar</button>
                                </form>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<div th:replace="~{fragmentos/pie-pagina :: pie-pagina-seccion}"></div>
</body>
</html>